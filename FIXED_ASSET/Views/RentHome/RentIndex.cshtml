
@{
    ViewBag.Title = "Home Page";
    //Layout = null;
    Layout = "~/Views/Shared/_RentLayout.cshtml";
}



<style>
    .column100 {
        width: 130px;
        padding-left: 25px;
    }

        .column100.column1 {
            width: 265px;
            padding-left: 42px;
        }

    .row100.head th {
        padding-top: 24px;
        padding-bottom: 20px;
    }

    .row100 td {
        padding-top: 18px;
        padding-bottom: 14px;
    }


    /*==================================================================
    [ Ver1 ]*/
    .table100.ver1 td {
        font-family: Montserrat-Regular;
        font-size: 14px;
        color: #808080;
        line-height: 1.4;
    }

    .table100.ver1 th {
        font-family: Montserrat-Medium;
        font-size: 12px;
        color: #fff;
        line-height: 1.4;
        text-transform: uppercase;
        background-color: #36304a;
    }

    .table100.ver1 .row100:hover {
        background-color: #f2f2f2;
    }

    .table100.ver1 .hov-column-ver1 {
        background-color: #f2f2f2;
    }

    .table100.ver1 .hov-column-head-ver1 {
        background-color: #484848 !important;
    }

    .table100.ver1 .row100 td:hover {
        background-color: #6c7ae0;
        color: #fff;
    }

    /*#tbl_ChannelStockDetails tr:nth-child(odd) {
            background-color: #eaf8e6;
        }

        #tbl_ChannelStockDetails tr:nth-child(even) {
            background-color: #57b846;
        }*/
</style>


<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Dashboard
        <small>Control panel</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Dashboard</li>
    </ol>
</section>


<!-- Main content -->
<section class="content">
    <!-- Small boxes (Stat box) -->
    <div class="row">
        <div class="col-lg-2 col-xs-6">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 id="Total_Sale">@ViewBag.TOTAL_OUTLET</h3>

                    <p>OUTLET</p>
                </div>
                <div class="icon">
                    <i class="ion ion-bag"></i>
                </div>
                <a onclick="ChannleStockMargin()" id="ChannelMargin" class="small-box-footer" data-toggle="collapse" href="#collapseMargin" aria-expanded="false" aria-controls="collapseMargin">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <div class="small-box bg-green show_stock_amount">
                <div class="inner">
                    <h3 id="Total_Inventory">@ViewBag.Total_Rent</h3>

                    <p>RENT PAYABLE</p>
                </div>
                <div class="icon">
                    <i class="ion ion-stats-bars"></i>
                </div>

                <a onclick="ChannleStockfigure()" id="ChannelStock" class="small-box-footer" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">More info <i class="fa fa-arrow-circle-right"></i></a>

            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
            <div class="small-box bg-yellow">
                <div class="inner">
                    <h3 id="Total_Invoice">@ViewBag.Total_Tax</h3>

                    <p>TOTAL TAX </p>
                </div>
                <div class="icon">
                    <i class="ion ion-person-add"></i>
                </div>
                <a onclick="ChannleRcvfigure()" id="ChannelRcv" class="small-box-footer" data-toggle="collapse" href="#collapseRcvFigure" aria-expanded="false" aria-controls="collapseRcvFigure">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-2 col-xs-6">
            <div class="small-box bg-red">
                <div class="inner">
                    <h3 id="Total_Sold_Quantity">@ViewBag.Total_AIT <sup style="font-size: 20px">ট</sup></h3>

                    <p>Total AIT</p>
                </div>
                <div class="icon">
                    <i class="ion ion-pie-graph"></i>
                </div>
                <a onclick="ChannleDlvfigure()" id="ChannelDlv" class="small-box-footer" data-toggle="collapse" href="#collapseDlvFigure" aria-expanded="false" aria-controls="collapseDlvFigure">More info <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <div class="col-lg-2 col-xs-6">
            <div class="small-box bg-purple show_stock_amount">
                <div class="inner">
                    <h3 id="Total_Inventory">@ViewBag.Total_VAT</h3>

                    <p>Total VAT</p>
                </div>
                <div class="icon">
                    <i class="ion ion-stats-bars"></i>
                </div>

                <a onclick="ChannleStockfigure()" id="ChannelStock" class="small-box-footer" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">More info <i class="fa fa-arrow-circle-right"></i></a>

            </div>
        </div>
        <style>
            #loading-img {
                background: url('../../../images/Velocity.gif') center center no-repeat;
                height: 100%;
                z-index: 20;
            }

            .overlay {
                background: #e9e9e9;
                display: none;
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                opacity: 0.5;
            }
             .overlay1 {
                background:green;
                display: none;
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                opacity: 0.5;
            }
        </style>


        <div class="row">
           <section class="col-md-12 col-lg-12 connectedSortable ui-sortable">
                <div class="box box-solid">

                    <div class="box-body chart-responsive">
                        <div class="col-sm-5">
                            <div class="form-group">
                                <label for="Start_Date" class="col-sm-4 control-label">Year</label>
                                <div class="col-md-8">
                                    <select class="form-control" id="Rent_Pay_Date" placeholder="---select Day---"></select>
                                </div>
                            </div>
                        </div>
                        @*<div class="col-sm-5">
                            <div class="form-group">
                                <label for="End_Date" class="col-sm-4 control-label">End Date</label>
                                <div class="col-sm-8">
                                    <div class="input-group date" data-provide="datepicker">
                                        <input type="text" data-date-format="mm/dd/yyyy" id="End_Date" class="form-control datepicker">
                                        <div class="input-group-addon">
                                            <span class="glyphicon glyphicon-th"></span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>*@
                        <div class="col-md-2">

                            <a class="btn btn-success btn-sm ad-click-event btn-block" id="btnShow_AREA_ORG_MARGIN" onclick="AREA_ORG_ART_MARGIN()">
                                S H O W
                            </a>
                        </div>
                        <div class="col-md-6 col-md-offset-3">
                            @*<div class="overlay">
                                <div id="loading-img"></div>
                            </div>*@
                            <h3><span id="AREA_ORG_ART_MARGIN_TIME"></span>  </h3>
                        </div>

                        <div class="col-md-12">
                            <div class="overlay">
                                <div id="loading-img"></div>
                            </div>
                            <div id="AREA_ORG_ART_MARGIN" style="width: 98%;"></div>
                        </div>
                      </div>
                    <!-- /.box-body -->
                </div>

             </section>


        </div>
        <div class="row">
          <section class="col-md-12 col-lg-12 connectedSortable ui-sortable">
                <div class="box box-solid">
                   <div class="box-body chart-responsive">
                        <div class="col-sm-5">
                            <div class="form-group">
                                <label for="Rent_Year" class="col-sm-4 control-label">Year</label>
                                <div class="col-md-8">
                                    <select class="form-control" id="Rent_Year" placeholder="---select Day---"></select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group">
                                <label for="Rent_Month" class="col-sm-4 control-label">Month</label>
                                <div class="col-md-8">
                                    <select class="form-control" id="Rent_Month" placeholder="---select Day---"></select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <a class="btn btn-success btn-sm ad-click-event btn-block" id="btnShow_NOTICE_PERIOD" onclick="RENT_NOTICE_PERIOD()">
                                S H O W
                            </a>
                        </div>
                        <div class="col-md-6 col-md-offset-3">
                            @*<div class="overlay">
                                <div id="loading-img"></div>
                            </div>*@
                            <h3><span id="RENT_NOTICE_PERIOD_TIME" style="background-color:aquamarine"></span>  </h3>
                        </div>

                        <div class="col-md-12">
                            <div class="overlay1">
                                <div id="loading-img"></div>
                            </div>
                            <div id="RENT_NOTICE_PERIOD" style="width: 98%;"></div>
                        </div>
                       </div>
                    <!-- /.box-body -->
                </div>
             </section>
           </div>
        <div class="row">
            <section class="col-md-12 col-lg-12 connectedSortable ui-sortable">
                <div class="box box-solid">
                    <div class="box-body chart-responsive">
                        @*<div class="col-md-2">
                             <a class="btn btn-success btn-sm ad-click-event btn-block" id="btnShow_NOTICE_PERIOD" onclick="RENT_NOTICE_PERIOD()">
                               S H O W
                           </a>
                        </div>*@
                        <div class="col-md-6 col-md-offset-3">
                            @*<div class="overlay">
                                <div id="loading-img"></div>
                            </div>*@
                            <h3><span id="RENT_AGREEMENT_NOTICE_PERIOD_TIME" style="background-color:aquamarine"></span>  </h3>
                        </div>

                        <div class="col-md-12">
                            <div class="overlay1">
                                <div id="loading-img"></div>
                            </div>
                            <div id="RENT_AGREEMENT_NOTICE_PERIOD" style="width: 98%;background-color:rebeccapurple"></div>
                        </div>
                      </div>
                    <!-- /.box-body -->
                </div>
            </section>
        </div>
        <div style="text-align: center">
            <canvas id="Piecanvas"></canvas>
        </div>



</section>

<script src="../../Scripts/jquery.min.js"></script>
<script src="../../Scripts/raphael.min.js"></script>
@*<script src="../../Scripts/morris.min.js"></script>*@
<script src="../..//dist/js/pages/dashboard.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="../../plugins/morris/morris.min.js"></script>
<!-- Morris charts -->
<link href="../../Content/css/morris.css" rel="stylesheet" />

<script type="text/javascript" src="../../Scripts/loader.js"></script>
<script type="text/javascript" src="../../Scripts/daterangepicker.js"></script>
<script type="text/javascript" src="../../Scripts/moment.min.js"></script>
<script src="../../Scripts/daterangepicker.js"></script>
<link href="../../Content/daterangepicker.css" rel="stylesheet" />
<!-- iCheck for checkboxes and radio inputs -->
<link rel="stylesheet" href="../../plugins/iCheck/all.css">
<!-- iCheck 1.0.1 -->
<script src="../../plugins/iCheck/icheck.min.js"></script>

<link href="../../dist/css/bootstrap-datepicker.min.css" rel="stylesheet" />
<script src="../../dist/js/bootstrap-datepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.bundle.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <script>

        $(document).ready(function () {
            //google.charts.load('current', { 'packages': ['geochart'] });
            //google.charts.setOnLoadCallback(AREA_ORG_ART_MARGIN);
            google.charts.load('current', {'packages':['corechart']});
            google.charts.setOnLoadCallback(AREA_ORG_ART_MARGIN);

              google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(RENT_NOTICE_PERIOD);
            $.fn.datepicker.defaults.autoclose = true;
        //$("#Start_Date").datepicker("setDate", new Date());
        //$("#End_Date").datepicker("setDate", new Date());
          google.charts.load('visualization', '1.0', { 'packages': ['corechart', 'bar'] });
        // Draw the pie chart for Sarah's pizza when Charts is loaded.
        google.charts.setOnLoadCallback(drawChart);
        //google.load('visualization', '1.0', {'packages':['corechart'], 'callback': AREA_ORG_ART_MARGIN});
       // google.charts.setOnLoadCallback(AREA_ORG_ART_MARGIN);

        var days = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"];

        for (i = 1900; i <= days.length; i++) {

            $('#Rent_Pay_Date').append($('<option />').html(days[i]));

}
});
    for (i = new Date().getFullYear(); i > 1900; i--) {
            $('#Rent_Pay_Date').append($('<option />').val(i).html(i));
        }
         for (i = new Date().getMonth(); i > 0; i--) {
            $('#Rent_Month').append($('<option />').val(i).html(i));
}
for (i = new Date().getFullYear(); i > 1900; i--) {
            $('#Rent_Year').append($('<option />').val(i).html(i));
        }
    //      var months = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"];

    //for (i =0 ; i <=months.length; i++) {
       
    //        $('#Rent_Month').append($('<option />').html(months[i]));
                       
       //}



                    function AREA_ORG_ART_MARGIN() {
            $(".overlay").show();
     var vStartDt = $("#Rent_Pay_Date").val();


        if (vStartDt == "") {
            toastr.error("Please Select Year", "Year ",
                {
                    "positionClass": "toast-top-right",
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "timeOut": "5000",
                    "closeButton": true
                });

                    return false;
                       }


               $.ajax({
              type: "POST",
               contentType: "application/json; charset=utf-8",
               url: "/RentHome/MONTH_WISE_RENT",
               dataType: "json",
            data: JSON.stringify(
                {
            _FrmDate: vStartDt

                      }),
            success: function (response) {
            $(".overlay").hide();
            console.log(response);
                $("#btnShow_AREA_ORG_MARGIN").html("S H O W");
               $("#AREA_ORG_ART_MARGIN_TIME").html("MONTH WISE RENT FROM " + response.Currentdata[0].Year);
                   var data = new google.visualization.DataTable();
             //var data = new google.visualization.DataTable();
              data.addColumn('string', 'Month');
                 data.addColumn('number', 'Rent');
                //  data.addColumn('string', 'AreaID');
                for (var i = 0; i < response.Currentdata.length; i++) {
                   data.addRow(
                [
                    response.Currentdata[i].Month_rent,//+ '-' + response.Currentdata[i].AreaID,
                    response.Currentdata[i].Total_Rent

                ]
            );
                   }


          //// Set options for Sarah's pie chart.
                var options = {
            chart: {
            title: ''
               //        //,
                //        //subtitle: 'Sales Today and Yesterday',
                    },
             bars: 'vertical',
                    vAxis: {format: 'decimal' },
                   height: 400,
                        colors: ['#1b9e77']//, '#d95f02'
                             };
                function selectHandler() {
                    var selectedItem = chart.getSelection()[0];
                    if (selectedItem) {
                        var Month = data.getValue(selectedItem.row, 0);
                  // var topping1 = data.getValue(selectedItem.row, 1);

                //alert('Your Selected Date: ' + AreaName);
                        AREA_CATAGORY_MARGIN(Month)
                      }
                       }
 
              ////var chart = new google.visualization.LineChart(document.getElementById('Bar_Chart'));
               
             var chart = new google.charts.Bar(document.getElementById('AREA_ORG_ART_MARGIN'));
              //google.visualization.events.addListener(chart, 'select', selectHandler);
            chart.draw(data, google.charts.Bar.convertOptions(options));
              chart.draw(data, options);

               }
               });

            }

        
                    function RENT_NOTICE_PERIOD() {
            $(".overlay1").show();
        var vYear = $("#Rent_Year").val();
        var vMonth = $("#Rent_Month").val();

        if (vYear == "") {
            toastr.error("Please Select Year", "Year ",
                {
                    "positionClass": "toast-top-right",
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "timeOut": "5000",
                    "closeButton": true
                });

                    return false;
                       }


               $.ajax({
              type: "POST",
               contentType: "application/json; charset=utf-8",
               url: "/RentHome/RENT_NOTICE_PERIOD",
               dataType: "json",
            data: JSON.stringify(
                {
            _vYear: vYear,
             _vMonth:vMonth
                      }),
            success: function (response) {
            $(".overlay").hide();
            console.log(response);
                $("#btnShow_NOTICE_PERIOD").html("S H O W");
               $("#RENT_NOTICE_PERIOD_TIME ").css("text-align:center;");
               $("#RENT_NOTICE_PERIOD_TIME").html("AGREEMENT END " + response.Currentdata[0].Year + " MONTH " +response.Currentdata[0].Month);
                   var data = new google.visualization.DataTable();
             //var data = new google.visualization.DataTable();
              data.addColumn('string', 'Project');
              data.addColumn('string', 'Unit');
              data.addColumn('string', 'Actual Rent End Date','color','yellow');
                //  data.addColumn('string', 'AreaID');
                for (var i = 0; i < response.Currentdata.length; i++) {
                    var dateString =  response.Currentdata[i].Act_REnd_Date .substr(6);
var currentTime = new Date(parseInt(dateString));
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
var date = day + "/" + month + "/" + year;
                   data.addRow(
                [
                    response.Currentdata[i].Project_Name,//+ '-' + response.Currentdata[i].AreaID,
                    response.Currentdata[i].UNIT_NAME,
                   date
                   

                ]
            );
                   }

                 var table = new google.visualization.Table(document.getElementById('RENT_NOTICE_PERIOD'));
              

        table.draw(data, {allowHtml: true,showRowNumber: true, width: '100%', height: '100%' });
         
          
               }
               });
             
               $.ajax({
              type: "POST",
               contentType: "application/json; charset=utf-8",
               url: "/RentHome/RENT_AGREEMENT_NOTICE_PERIOD",
               dataType: "json",
            data: JSON.stringify(
                {
            _vYear: vYear,
             _vMonth:vMonth
                      }),
            success: function (response) {
            $(".overlay1").hide();
            console.log(response);
                $("#btnShow_NOTICE_PERIOD").html("S H O W");
               $("#RENT_NOTICE_PERIOD_TIME ").css("text-align:center;");
               $("#RENT_AGREEMENT_NOTICE_PERIOD_TIME").html("AGREEMENT HANDOVER " + response.Currentdata[0].Year  /*+ " MONTH "*/ + response.Currentdata[0].Month);
                   var data1 = new google.visualization.DataTable();
             //var data = new google.visualization.DataTable();
              data1.addColumn('string', 'Project');
              data1.addColumn('string', 'Unit');
              data1.addColumn('string', 'Agreement Hand Over Date','color','yellow');
                //  data.addColumn('string', 'AreaID');
                for (var i = 0; i < response.Currentdata.length; i++) {
                    var dateString =  response.Currentdata[i].Agg_HO_Date .substr(6);
var currentTime = new Date(parseInt(dateString));
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
var date = day + "/" + month + "/" + year;
                   data1.addRow(
                [
                    response.Currentdata[i].Project_Name,//+ '-' + response.Currentdata[i].AreaID,
                    response.Currentdata[i].UNIT_NAME,
                   date
                   

                ]
            );
                   }

                 var table1 = new google.visualization.Table(document.getElementById('RENT_AGREEMENT_NOTICE_PERIOD'));
              

        table1.draw(data1, {allowHtml: true,showRowNumber: true, width: '100%', height: '100%' });
         
          
               }
               });

            }
            

    

</script>

