@using System.Data
@using System.Collections
@using FIXED_ASSET.DTO
@using System.Data
@using System.Collections

@{
    ViewBag.Title = "Supplier";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<ViewManufactureDTO> ManufactureGridList = new List<ViewManufactureDTO>();


    if (ViewBag.ManufactureGridList != null)
    {
        ManufactureGridList = ViewBag.ManufactureGridList;
    }
}


<link href="~/Content/css/select2.css" rel="stylesheet" />
<script src="~/Content/js/select2.full.min.js"></script>
<link href="~/Content/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<script src="~/Content/js/jquery.dataTables.min.js"></script>
<script src="~/Content/js/dataTables.bootstrap.min.js"></script>

<style type="text/css">

    div.addnew {
        display: none
    }

    html {
        overflow-y: scroll;
    }
</style>
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        @ViewBag.Title
        <small>Control panel</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Supplier</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <!-- Default box -->
    <div class="center-block col-md-6" style="float: none;">    </div>
    <div class="box box-primary addnew">
        @*<div class="box-header with-border">
            <h3 class="box-title">@ViewBag.Title</h3>
            <div class="box-tools pull-right">
                <button class="btn btn-primary bg-blue-gradient hide-form">Hide</button>
            </div>
        </div>*@
        <div class="panel-body">
            <div class="bs-example">
                <ul class="nav nav-pills" style="margin-bottom: 15px;">
                    <li class="active"><a href="#home" data-toggle="tab">Supplier </a></li>
                    <li><a href="#education" data-toggle="tab">Supplier Bank Account</a></li>
                    <li><a href="#supplier" data-toggle="tab">Contact Person</a></li>
                 </ul>
                <div id="myTabContent" class="tab-content form-horizontal">

                    <div class="tab-pane fade active in" id="home" color="blue">
                        <div id="" class="form-horizontal">
                            <section class="content">
                                <!-- Default box -->
                                <div class="center-block col-md-6" style="float: none;">    </div>
                                <div class="box box-primary addnew">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">@ViewBag.Title</h3>
                                        <div class="box-tools pull-right">
                                            <button class="btn btn-primary bg-blue-gradient hide-form">Hide</button>
                                        </div>
                                    </div>

                                    <form role="form"></form>

                                    <div class="box-body">
                                        <div class="panel panel-primary col-md-6 center-block" style="float: none;">
                                            <div class="panel-body">
                                                <fieldset>
                                                    <legend>Supplier</legend>
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <label for="Classification">Supplier ID</label>
                                                                <input type="text" class="form-control col-sm-4" id="manufactureId" placeholder="Supplier ID">
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="supplierList">Name</label>
                                                                <input type="text" class="form-control col-sm-4" id="manufactureId" placeholder="Name">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <label for="countryList">City</label>
                                                                <select type="text" class="form-control " id="countryList"></select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label class="col-sm-2 control-label no-padding" for="mobile">State</label>
                                                                <input type="text" class="form-control" id="mobile" placeholder="State">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <label for="countryList">Country</label>
                                                                <select type="text" class="form-control " id="countryList"></select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="zip">Zip</label>
                                                                <input type="text" class="form-control" id="accountNumber" placeholder="Zip">
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <label class="col-sm-2 control-label no-padding" for="uRL">URL</label>
                                                                <input type="text" class="form-control" id="uRL" placeholder="URL">
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="">Status</label>
                                                                <select id="active_status" class="form-control" name="active_status">
                                                                    <option value="true">Active</option>
                                                                    <option value="false">InActive</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <label for="address">Address</label>
                                                                <textarea name="address" class="form-control" id="address" placeholder="Address"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="text-right">
                                                        <button type="submit" class="btn btn-primary" id="submitManufacture" onclick="addcat();">Submit</button>
                                                        <button class="btn btn-sm btn-primary " id="updateManufacture">
                                                            <i class="ace-icon fa fa-check"></i> Update
                                                        </button>
                                                    </div>
                                                </fieldset>
                                            </div>
                                        </div>

                                    </div>

                                </div>

                                <!-- /.box -->
                                <!-- Default box -->
                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                        <h3 class="box-title">List All Manufacture</h3>
                                        <div class="box-tools pull-right">
                                            <button type="button" class="btn btn-box-tool show-form text-info bg-blue-gradient"><i class="fa fa-plus"></i>Add New</button>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="box-body table-responsive no-padding">
                                            <table id="datatable" class="table table-bordered table-striped compact hover" cellspacing="0" width="100%">
                                                <thead>
                                                    <tr>
                                                        @*<th>SL</th>*@
                                                        <th>Manufacture ID</th>
                                                        <th>Description</th>
                                                        <th class="hidden"></th>
                                                        <th>Country</th>
                                                        <th>Mobile No</th>
                                                        <th>URL</th>
                                                        <th>Address</th>
                                                        <th>Upload Image</th>
                                                        <th>Status</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <!--
                        <tbody>

                           
                            @{
                                if (ManufactureGridList.Count > 0)
                                {
                                    for (int i = 1; i <= ManufactureGridList.Count; i++)
                                    {

                                        <tr>
                                            
                                            <td>
                                                @ManufactureGridList[i - 1].EXTERNAL_ID
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].EXTERNAL_ID" />
                                            </td>
                                            <td>
                                                @ManufactureGridList[i - 1].DESCRIPTION
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].DESCRIPTION" />
                                            </td>
                                            <td>
                                                @ManufactureGridList[i - 1].DESCRIPTION
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].DESCRIPTION" />
                                            </td>
                                             <td>
                                                @ManufactureGridList[i - 1].COUNTRY
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].COUNTRY" />
                                            </td>
                                             <td>
                                                @ManufactureGridList[i - 1].COUNTRY_NAME
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].COUNTRY_NAME" />
                                            </td>
                                            <td>
                                                @ManufactureGridList[i - 1].PHN_NO
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].PHN_NO" />
                                            </td>
                                            <td>
                                                @ManufactureGridList[i - 1].URL
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].URL" />
                                            </td>
                                          <td>
                                                @ManufactureGridList[i - 1].ADDRESS
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].ADDRESS" />
                                            </td>
                                            <td>
                                                @ManufactureGridList[i - 1].LOGO_EXT
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].LOGO_EXT" />
                                            </td>
                                            <td>
                                                @ManufactureGridList[i - 1].STATUS
                                                <input type="text" class="hidden" value="@ManufactureGridList[i - 1].STATUS" />
                                            </td>
                                            <td class="hidden">
                                                <input type="text" value="@i" />
                                            </td>
                                            <td class="text-center">
                                                <a href="#edit_form" data-toggle="modal" class="btn btn-sm btn-primary blue" id="edit" onclick="editManufacture(@ManufactureGridList[i-1].MANF_ID )">
                                                <span class="fa fa-pencil-square-o"></span> Edit
                                                </a>
                                                <a class="btn btn-sm btn-danger" onclick="removeCategory(@ManufactureGridList[i - 1].EXTERNAL_ID)">
                                                        <span class="fa fa-trash"></span> Delete
                                                    </a>

                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {

                                }
                            }

                        </tbody> -->

                                            </table>

                                        </div>
                                        <!-- /.box-body -->
                                    </div>
                                    <div class="box-footer">
                                        Footer
                                    </div>
                                    <!-- /.box-footer-->
                                </div>
                                <!-- /.box -->

                            </section>

                        </div>
</div>
                    <div class="tab-pane fade" id="education" color="blue">
                        <div class="box-body">
                            <div class="panel panel-primary col-md-6 center-block" style="float: none;">
                                <div class="panel-body">
                                    <fieldset>
                                        <legend>Supplier Bank Account</legend>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label for="Classification">Supplier Bank ID</label>
                                                    <input type="text" class="form-control col-sm-4" id="manufactureId" placeholder="Manufacture ID">
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="supplierList">Supplier</label>
                                                    <select type="text" class="form-control " id="supplierList"></select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label for="countryList">Bank</label>
                                                    <select type="text" class="form-control " id="countryList"></select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="col-sm-2 control-label no-padding" for="mobile">Branch</label>
                                                    <input type="text" class="form-control" id="mobile" placeholder="Mobile No">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label for="uRL">Account Name</label>
                                                    <input type="text" class="form-control" id="accountName" placeholder="Account Name">
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="uRL">Account Number</label>
                                                    <input type="text" class="form-control" id="accountNumber" placeholder="Account Number">
                                                </div>

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label class="col-sm-2 control-label no-padding" for="currency">Currency</label>
                                                    <input type="text" class="form-control" id="currency" placeholder="Currency">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="col-sm-2 control-label no-padding" for="primary">Primary</label>
                                                    <input type="text" class="form-control" id="primary" placeholder="Primary">
                                                </div>

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label for="">Status</label>
                                                    <select id="active_status" class="form-control" name="active_status">
                                                        <option value="true">Active</option>
                                                        <option value="false">InActive</option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="text-right">
                                            <button type="submit" class="btn btn-primary" id="submitManufacture" onclick="addcat();">Submit</button>
                                            <button class="btn btn-sm btn-primary " id="updateManufacture">
                                                <i class="ace-icon fa fa-check"></i> Update
                                            </button>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="tab-pane fade" id="supplier" color="blue">
                        <div class="box-body">
                            <div class="panel panel-primary col-md-6 center-block" style="float: none;">
                                <div class="panel-body">
                                    <fieldset>
                                        <legend>Contact Person</legend>
                                        <div class="form-group">
                                            <label for="Classification">Contact Name</label>
                                            <input type="text" class="form-control" id="supplierId" placeholder="Contact Name">
                                        </div>

                                        <div class="form-group">
                                            <label for="Category">Phone </label>
                                            <input type="text" class="form-control" id="type" placeholder="Phone">
                                        </div>
                                        <div class="form-group">
                                            <label for="Category">Email </label>
                                            <input type="text" class="form-control" id="type" placeholder="Email">
                                        </div>
                                        <div class="form-group">
                                            <label for="Category">Notes </label>
                                            <input type="text" class="form-control" id="type" placeholder="Notes">
                                        </div>
                                        <div class="form-group">
                                            <label for="">Status</label>
                                            <select id="active_status" class="form-control" name="active_status">
                                                <option value="true">Active</option>
                                                <option value="false">InActive</option>
                                            </select>
                                        </div>

                                        <div class="text-right">
                                            <button type="submit" class="btn btn-primary" id="submitSupplier" onclick="addcat();">Submit</button>
                                            <button class="btn btn-sm btn-primary " id="updateSupplier">
                                                <i class="ace-icon fa fa-check"></i> Update
                                            </button>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>

                        </div>

                    </div>
                    </div>
                </div>
        </div>
        <form role="form"></form>
     
    </div>

                <!-- /.box -->
                <!-- Default box -->
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">List All Supplier</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool show-form text-info bg-blue-gradient"><i class="fa fa-plus"></i>Add New</button>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="box-body table-responsive no-padding">
                            <table id="datatable" class="table table-bordered table-striped compact hover" cellspacing="0" width="100%">
                                <thead>
                                    <tr>
                                        @*<th>SL</th>*@
                                        <th>Supplier ID</th>
                                        <th>Name</th>
                                        <th>City</th>
                                        <th>State</th>
                                        <th class="hidden"></th>
                                        <th>Country</th>
                                        <th>Zip</th>
                                        <th>URL</th>
                                        <th>Status</th>
                                        <th>Address</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <!--
                            <tbody>

                                @{
                                    int sno = 0;
                                }
                                @{
                                    if (ManufactureGridList.Count > 0)
                                    {
                                        for (int i = 1; i <= ManufactureGridList.Count; i++)
                                        {

                                            <tr>
                                                <td>
                                                    @{ sno++; }
                                                    @sno
                                                </td>
                                                <td>
                                                    @ManufactureGridList[i - 1].EXTERNAL_ID
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].EXTERNAL_ID" />
                                                </td>
                                                <td>
                                                    @ManufactureGridList[i - 1].DESCRIPTION
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].DESCRIPTION" />
                                                </td>
                                                <td>
                                                    @ManufactureGridList[i - 1].DESCRIPTION
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].DESCRIPTION" />
                                                </td>
                                                 <td>
                                                    @ManufactureGridList[i - 1].COUNTRY
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].COUNTRY" />
                                                </td>
                                                 <td>
                                                    @ManufactureGridList[i - 1].COUNTRY_NAME
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].COUNTRY_NAME" />
                                                </td>
                                                <td>
                                                    @ManufactureGridList[i - 1].PHN_NO
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].PHN_NO" />
                                                </td>
                                                <td>
                                                    @ManufactureGridList[i - 1].URL
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].URL" />
                                                </td>
                                              <td>
                                                    @ManufactureGridList[i - 1].ADDRESS
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].ADDRESS" />
                                                </td>
                                                <td>
                                                    @ManufactureGridList[i - 1].LOGO_EXT
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].LOGO_EXT" />
                                                </td>
                                                <td>
                                                    @ManufactureGridList[i - 1].STATUS
                                                    <input type="text" class="hidden" value="@ManufactureGridList[i - 1].STATUS" />
                                                </td>
                                                <td class="hidden">
                                                    <input type="text" value="@i" />
                                                </td>
                                                <td class="text-center">
                                                    <a href="#edit_form" data-toggle="modal" class="btn btn-sm btn-primary blue" id="edit" onclick="editManufacture(@ManufactureGridList[i-1].MANF_ID )">
                                                    <span class="fa fa-pencil-square-o"></span> Edit
                                                    </a>
                                                    <a class="btn btn-sm btn-danger" onclick="removeCategory(@ManufactureGridList[i - 1].EXTERNAL_ID)">
                                                            <span class="fa fa-trash"></span> Delete
                                                        </a>

                                                </td>
                                            </tr>
                                        }
                                    }
                                    else
                                    {

                                    }
                                }

                            </tbody> -->

                            </table>

                        </div>
                        <!-- /.box-body -->
                    </div>
                    <div class="box-footer">
                        Footer
                    </div>
                    <!-- /.box-footer-->
                </div>
                <!-- /.box -->

</section>
<!-- /.content -->

<script>
                                                

    $(document).ready(function () {

        //$("#organization").validate();
        //statusList();
        $('.select2').select2();
        readImageFile();


        CountryList();

        $('.addnew').hide();
        $('.show-form').click(function () {
            $('.addnew').show();
            $('.show-form').hide();
            $('#updateManufacture').hide();
        });
        $('.hide-form').click(function () {
            $('.addnew').hide();
            $('.show-form').show();
        });



        $('#address-tab').attr('class', 'disabled');

        $('#address-tab').click(function (event) {
            if ($(this).hasClass('disabled')) {
                return false;
            }

        });
        //  debugger;
        getData();

    });

    function CountryList() {

        $.ajax({
            url: '/AssetCategory/CountryList',
            type: 'POST',
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (response) {
                if (response.length > 0) {
                    console.log(response);
                    $('select#countryList').html('');
                    var result = '';
                    result += "<option value='0'>--Select--</option>";
                    for (var i = 0; response.length > i; i++) {

                        result += "<option  value='" + response[i].COUNT_ID + "'>" + response[i].NAME + "</option>";

                    }
                }
                $('select#countryList').append(result);


            }
        });
    }


    function getData() {

        $('#datatable').DataTable({
            "searching": true,
            "paging": true,
            "ordering": true,
            "info": true,
            "language":
            {
                "processing": "<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>"
            },
            "processing": true,
            "ajax": {
                "url": "/AssetCategory/ManufactureList",
                "type": "GET",
                "datatype": "json"
            },
            "columns": [
                { "data": "EXTERNAL_ID", "autoWidth": true },
                { "data": "DESCRIPTION", "autoWidth": true },
                { "data": "COUNTRY_NAME", "autoWidth": true },
                { "data": "PHN_NO", "autoWidth": true },
                { "data": "URL", "autoWidth": true },
                { "data": "ADDRESS", "autoWidth": true },
                { "data": "LOGO_EXT", "autoWidth": true },
                { "data": "STATUS", "autoWidth": true },
                {
                    "data": "MANF_ID", "width": "50px", "render": function (data) {
                        return '<button type="button" class="btn btn-primary" onclick="editManufacture(' + data + ')">Edit</button>';
                        // return '<div class="btn-group"><button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button><ul class="dropdown-menu"><li><button type="button" class="btn btn-primary" onclick="getbyID(' + data + ')">DETAIL</button></li><li><button type="button" class="btn btn-info" onclick="getOldCategory(' + data + ')"> OLD CATEGORY</button></li><li><button type="button" class="btn btn-info" onclick="getbyInventoryInsert(' + data + ')">INVENTORY INSERT</button></li><li><button type="button" class="btn btn-warning" onclick="getbyInventoryView(' + data+')">INVENTORY VIEW</button></li></ul></div>';
                    }
                }
            ]
        });

    }

    $("#submitManufacture").click(function () {
        if ($("#supplierId").val() == "" || $("#name").val() == "" || $("#city").val() == "") {

            toastr.error('Enter Data', 'Department', {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            });
            return false;
        }

        if ($("#name").val() != $("#name").val().toUpperCase()) {

            toastr.error("Enter Your Manufacture Name Uppercase");
            return false;
        }

        if ($.trim($("#manufactureId").val()).length > 5) {
            toastr.error('Enter Your Manufacture ID in 5 digit', 'Manufacture ID!', {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            });
            return false;
            //event.preventDefault();
        }


        //var rowStatus = 1;
        var supplierId = $('#supplierId ').val();
        var name = $('#name').val();
        var city = $('#city ').val();
        var state = $('#state ').val();
        var zip = $('#zip').val();
        var uRL = $('#uRL ').val();
        var address = $('#address ').val();
        var activeStatus = $('#active_status').val();


        if (supplierId == '') {
            alert('Manufacture Code  field is empty !!');
            return false;
        }
        else if (name == '') {
            alert('Manufacture Name  field is empty!!');
            return false;
        }
        else {
            //ajax passing data to controller
            $.ajax({

                type: "POST",
                url: '/AssetCategory/SaveSupplier',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    //alert("Result" + response);
                    if (response != null) {


                        toastr.success(response, 'Manufacture', {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": false,
                            "progressBar": true,
                            "positionClass": "toast-top-right",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "300",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        });
                        $("#manufactureId").val("");
                        $("#manufactureName").val("");
                        $("#countryList").val("");
                        $("#mobile").val("");
                        $("#uRL").val("");
                        $("#address").val("");
                        // $("#active_status").val(-1);
                        $('.addnew').show();
                        setTimeout(function () {
                            location.reload();
                        }, 5000);
                        // $('#datatable').load(document.URL + ' #datatable');

                    }

                },
                data: JSON.stringify({
                    supplierId: supplierId,
                    name: name,
                    city: city,
                    state: state,
                    zip: zip,
                    uRL: uRL,
                    address: address,
                    activeStatus: activeStatus

                }),
                //success: function (result) {
                //    location.reload(true);

                //    $("h2").css({ color: result[1] });
                //},
                error: function () {
                    alert("error");
                }
            });
        }

    });


    function editManufacture(manfId) {
        $("#manufactureId").prop("disabled", true);
        // $("#ClassList").prop("disabled", true);
        $('.addnew').show();
        $('#updateManufacture').show();
        $('#submitManufacture').hide();

        $.ajax({
            type: "POST",
            url: "/AssetCategory/Edit_Manufacture",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: JSON.stringify({
                //  obj: asd
                manfId: manfId

            }),
            success: function (response) {

                console.log(response);


                $("#manufactureId").val(response.data.EXTERNAL_ID);
                $("#manufactureName").val(response.data.DESCRIPTION);
                $("#countryList").val(response.data.COUNTRY);
                $("#mobile").val(response.data.PHN_NO);
                $("#uploadImage").val(response.data.LOGO_EXT);
                $("#uRL").val(response.data.URL);
                $("#address").val(response.data.ADDRESS);

                if (response.data.STATUS == 'Active') {
                    $("#active_status").val('true');
                } else {
                    $("#active_status").val('false');
                }

                $("#btnUpdate").show();


            }
        })


    }


    $("#updateManufacture").click(function UpdateData() {

        // var rowStatus = 2;

        if ($("#manufactureName").val() != $("#manufactureName").val().toUpperCase()) {

            toastr.error("Enter Your Manufacture Name Uppercase");
            return false;
        }
        var manufactureId = $('#manufactureId ').val();
        var manufactureName = $('#manufactureName').val();
        var countryList = $('#countryList ').val();
        var mobile = $('#mobile ').val();
        var uploadImage = $('#uploadImage').val();
        var uRL = $('#uRL ').val();
        var address = $('#address ').val();
        var activeStatus = $('#active_status').val();



        if (manufactureId == '') {
            alert('Department Code  field is empty !!');
            return false;
        }
        else if (manufactureName == '') {
            alert('Department Name  field is empty!!');
            return false;
        }
        else {
            //ajax passing data to controller
            $.ajax({
                url: '/AssetCategory/updateManufacture',
                type: 'POST',
                dataType: "json",
                traditional: true,
                success: function (response) {
                    //alert("Result" + response);
                    if (response != null) {


                        toastr.success(response, 'Manufacture', {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": false,
                            "progressBar": true,
                            "positionClass": "toast-top-right",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "300",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        });
                        $("#manufactureId").val("");
                        $("#manufactureName").val("");
                        $("#countryList").val("");
                        $("#mobile").val("");
                        $("#uRL").val("");
                        $("#address").val("");
                        // $("#active_status").val(-1);
                        $('.addnew').show();
                        setTimeout(function () {
                            location.reload();
                        }, 5000);
                        // $('#datatable').load(document.URL + ' #datatable');

                    }

                },
                data: {
                    manufactureId: manufactureId,
                    manufactureName: manufactureName,
                    countryList: countryList,
                    mobile: mobile,
                    uploadImage: uploadImage,
                    uRL: uRL,
                    address: address,
                    activeStatus: activeStatus


                },
                //success: function (response) {

                //    if (response == 'Success') {
                //        location.reload();
                //        //getData();
                //    }
                //},
                error: function () {
                    alert("error");
                }
            });
        }

    });

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#image_upload_preview').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

    $("#inputFile").change(function () {
        readURL(this);
    });

    function readImageFile() {

        if (this.files && this.files[0]) {

            var FR = new FileReader();

            FR.addEventListener("load", function (e) {
                document.getElementById("image_upload_preview").src = e.target.result;
                document.getElementById("image_upload_preview").value = e.target.result;
                $('#upload_icon').hide();
            });

            FR.readAsDataURL(this.files[0]);
        }
    }
</script>